---
- name: Ensure PHP CLI config directory exists.
  file:
    dest: /etc/php/7.2/cli/conf.d/
    state: directory
  become: yes

- name: Increase PHP CLI memory limit.
  copy:
    content: |
      ; This file is managed by Ansible. Any changes will be reverted. See the infrastructure repository to apply persistent changes to this file.
      ; configuration for increasing PHP CLI memory limit
      ; priority=20
      memory_limit = {{ php_cli_memory_limit }}
    dest: /etc/php/7.2/cli/conf.d/20-memory_limit.ini
  become: yes
